<div class="room-list-screen">
  <div class="room-panel">
    <h2>Hola, {{ player()?.name }}</h2>
    <p>Elige una sala existente o crea una nueva para comenzar la partida.</p>

    <div class="create-actions">
      <button class="cta-button" (click)="createRoom('public')">Crear sala pública</button>
      <button class="secondary-button" (click)="createRoom('private')">Crear sala privada</button>
    </div>

    <div class="private-hint">
      <p>Las salas privadas no aparecen en la lista.</p>
      <p>Comparte el enlace o el ID con tus amigos.</p>
    </div>

    <div class="join-by-code">
      <label class="input-label" for="roomCodeInput">Unirse con identificador</label>
      <div class="join-input-row">
        <input
          id="roomCodeInput"
          #roomCodeInput
          type="text"
          placeholder="ID de sala"
          maxlength="6"
          (keyup.enter)="joinRoomByCode(roomCodeInput)"
        />
        <button class="cta-button" type="button" (click)="joinRoomByCode(roomCodeInput)">
          Unirse
        </button>
      </div>
      <div class="helper-text">
        <p>Introduce el ID de la sala a la que deseas unirte.</p>
        <p>Si no tienes el ID, pide a un amigo que te lo comparta.</p>
      </div>
    </div>

    @if (roomList().length > 0) {
    <ul class="room-list">
      @for (room of roomList(); track room.id) {
      <li>
        <div class="room-info">
          <strong>{{ room.name }}</strong>
          <span>{{ room.players.length }} jugadores</span>
          @if (room.visibility === 'private') {
            <span class="room-info__visibility">Privada</span>
          }
          @if (room.inProgress) {
            <span class="room-info__status">En partida</span>
          }
        </div>
        <button
          class="secondary-button"
          [disabled]="room.inProgress"
          (click)="joinRoom(room.id)"
        >
          {{ room.inProgress ? 'En partida' : 'Unirse' }}
        </button>
      </li>
      }
    </ul>
    } @else {
    <div class="empty-copy">
      <p>No hay salas disponibles por ahora.</p>
      <p>¡Crea la primera!</p>
    </div>
    }
  </div>
</div>
