<h3>Tablero</h3>
<div class="players">
  @for (p of state().players; let i = $index; track p.player.id) {
  <player-board
    [player]="p"
    [isMe]="p.player.id === meId"
    [isActive]="i === state().turnIndex"
    [roomId]="state().roomId"
    [allSlotIds]="allSlotIds()"
    [transplantState]="transplantState"
    (startTransplant)="startTransplant($event.card, $event.firstOrgan)"
    (finishTransplant)="finishTransplant($event)"
    [contagionState]="contagionState"
    (virusMoved)="addAssignment($event)"
    (startContagion)="startContagion($event.card)"
  ></player-board>
  }
</div>

<!-- BotÃ³n cancelar visible solo en modo trasplante -->
@if (transplantState) {
<button class="cancel-transplant" (click)="cancelTransplant()">
  Cancelar trasplante
</button>
}

<!-- Botones modo contagio -->
@if (contagionState) {
<button (click)="finishContagion()">Finalizar contagio</button>
<button (click)="cancelContagion()">Cancelar</button>
}
