<div class="target-select">
  <header class="target-select__header">
    <span class="target-select__badge">{{ cardKindLabel }}</span>
    <div class="target-select__summary">
      <span class="target-select__color">{{ cardColorLabel }}</span>
      @if (cardSubtypeLabel) {
      <span class="target-select__subtype">{{ cardSubtypeLabel }}</span>
      }
    </div>
  </header>

  <p class="target-select__instruction">{{ instruction }}</p>

  @if (isMyTurn()) {

  @if (isTransplant) {
  <game-target-select-transplant [playerOptions]="playerOptions" [targetOptions]="targetOptions()"
    [transplantPlayerA]="transplantPlayerA" [transplantSelectionA]="transplantSelectionA"
    [transplantPlayerB]="transplantPlayerB" [transplantSelectionB]="transplantSelectionB"
    (targetChange)="handleTargetChange($event.value, $event.which)"
    (playerChange)="handlePlayerChange($event.playerId, $event.which)" />
  }

  @if (isContagion) {
  <game-target-select-contagion [contagionAssignments]="contagionAssignments()" [publicState]="publicState()"
    (contagionTargetChange)="contagionTargetChange.emit($event)" />
  }

  @if (isPlayerOnly) {
  <game-target-select-player [playerOptions]="playerOptions" [singlePlayerSelection]="singlePlayerSelection"
    (playerChange)="handlePlayerChange($event, 'single')" />
  }

  @if (showSingleTarget) {
  <game-target-select-standard [playerOptions]="playerOptions" [targetOptions]="targetOptions()"
    [singlePlayerSelection]="singlePlayerSelection" [singleSelectionValue]="singleSelectionValue"
    [isSelfTarget]="isSelfTarget" [isFailedExperiment]="isFailedExperiment" [isDragDrop]="isDragDrop()"
    [selectedAction]="selectedAction()" (targetChange)="handleTargetChange($event, 'single')"
    (playerChange)="handlePlayerChange($event, 'single')" (actionChange)="actionChange.emit($event)" />
  }

  @if (isBodySwap) {
  <game-target-select-body-swap [selectedDirection]="selectedDirection()"
    (directionChange)="directionChange.emit($event)" />
  }

  @if (hasNoOptionsAvailable) {
  <p class="target-select__empty">
    No hay objetivos disponibles por ahora.
  </p>
  }

  <div class="target-select__actions">
    <button type="button" class="target-select__confirm" [disabled]="confirmDisabled()" (click)="confirm.emit()">
      Confirmar
    </button>
    <button type="button" class="target-select__cancel" (click)="cancel.emit()">
      Cancelar
    </button>
  </div>
  }
</div>