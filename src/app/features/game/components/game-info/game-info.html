<div
  class="game-info"
  [class.game-info--expanded]="showDetails"
  (click)="toggleDetails()"
  (keydown)="onKeyDown($event)"
  role="button"
  tabindex="0"
  [attr.aria-expanded]="showDetails"
>
  <div class="game-info__header">
    <h2>Partida {{ shortRoomId }}</h2>
    <div class="game-info__actions">
      <button
        type="button"
        class="history-toggle"
        (click)="onHistoryClick($event)"
      >
        Historial @if (historyCount) {
        <span class="history-badge">{{ historyCount }}</span>
        }
      </button>
    </div>
  </div>

  @if (showDetails) {
  <div class="game-info__details">
    <p>Iniciada: {{ state.startedAt | date : "dd/MM/yyyy HH:mm" }}</p>
    <p>Mazo: {{ state.deckCount }} cartas</p>
    <p>Descarte: {{ state.discardCount }} cartas</p>
    <div class="game-info__controls">
      <button
        type="button"
        class="game-info__leave"
        (click)="onLeaveClick($event)"
      >
        Salir de la partida
      </button>
      <button
        type="button"
        class="sound-toggle"
        (click)="onToggleMute($event)"
        [attr.aria-pressed]="isMuted()"
      >
        {{ isMuted() ? "Activar sonido" : "Silenciar sonido" }}
      </button>
    </div>
  </div>
  }
</div>
